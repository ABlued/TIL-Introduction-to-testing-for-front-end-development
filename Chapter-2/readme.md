# Chapter 2 테스트 방법과 테스트 전략

## 2-1 테스트 범위와 목적

테스트 작성법부터 배우면 어떠한 상황에 어떠한 테스트가 맞는건지 판단하기 어렵다. 그러므로 먼저 프런트엔드 <b>테스트의 범위</b>와 <b>목적</b>을 이해해야 한다. `범위와 목적을 이해해야 테스트 자동화의 장점을 누릴 수 있다.`

### 2-1-1 테스트 범위

웹 애플리케이션을 구성하는 모듈

1. 라이브러리가 제공하는 함수
2. 로직을 담당하는 함수
3. UI 관련 함수
4. 웹 API 클라이언트
5. API 서버
6. 데이터베이스 서버

테스트를 작성할 때는 어디부터 어디까지 테스트에 포함해야할지 판단하는 것이 중요하다. 프런트엔드 개발 테스트 범위(또는 테스트 레벨)는 크게 네 가지로 분류한다.

#### 1. 정적 분석

타입스크립트, ESLint 등이 해주는 컴파일 이전 코드 정적 테스트이다. 하나의 모듈을 테스트하는데에도 쓰이지만 2~3, 3~4를 연계해서 사용할 때에도 사용한다. 정적 분석은 버그를 조기에 발견할 수 있으며, 타입 추론을 통해 런타임 동작을 예측할 수 있다.

```typescript
// 런타입 작동을 예측할 수 있게 해주는 타입  추론
function getMessage(name: string | undefined) {
  const a = name;
  if (!name) {
    return 'Hello anonymous!';
  }
  // name이 undefined라는 분기문을 거쳐왔으니 이제 name은 자동으로 string으로 추론된다.
  const b = name; // b: string
  return `Hello ${name}`;
}
```

ESLint는 코드 가이드라인을 제공해준다. 부적절한 구문을 수정해서 잠재적으로 발생할 수 있는 버그를 수정한다.

```typescript
useEffect(() => {
  console.log(name);
}, []); // 의존성 배열에 참조 중인 name을 포함시켜야한다는 eslint 에러 발생
```

#### 2. 단위 테스트

한 가지 모듈에 한정하여 해당 모듈의 기능이 동작하는지 검증하는 테스트다. 독립된 환경에서 검증하므로 실제 애플리케이션을 사용할 때는 거의 발생하지 않는 케이스(`코너 케이스(corner case)`) 검증에 적합하다.

#### 3. 통합 테스트

1~4, 2~3 처럼 여러 모듈 조합으로 제공되는 기능을 검증하는 테스트다. 범위가 넓어질수록 효율적인 상대적으로 테스트가 가능하지만 대략적인 검증에 그치게 된다.

#### 4. E2E 테스트

1~4를 통틀어 헤드리스 브라우저와 UI 자동화 도구를 결합하여 검증하는 테스트다. UI 테스트뿐만 아니라 외부 스토리지, 데이터베이스 등 연동 중인 하위 시스템도 포함이 된다. 가장 광범위한 통합 테스트이며, 실제 애플리케이션을 사용할 때와 가장 유사한 테스트이다.

### 2-1-2 테스트 목적
